<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plexus Member Directory Viewer</title>
    <style>
        :root {
            --primary: #6366f1;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #1e293b;
            --text-secondary: #64748b;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            line-height: 1.5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            margin-bottom: 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .controls {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        
        .btn {
            background-color: var(--primary);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.2s;
        }
        
        .btn:hover {
            background-color: #4f46e5;
        }
        
        input[type="file"] {
            font-size: 100px;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
        }
        
        input[type="text"] {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .stats {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s, box-shadow 0.2s;
            border: 1px solid #e2e8f0;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .card h2 {
            margin: 0 0 10px 0;
            font-size: 1.25rem;
            color: var(--text);
        }
        
        .tag {
            display: inline-block;
            background: #e0e7ff;
            color: #4338ca;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .info-row {
            margin-bottom: 8px;
            display: flex;
            align-items: flex-start;
            font-size: 0.95rem;
        }
        
        .icon {
            margin-right: 10px;
            width: 20px;
            text-align: center;
            color: var(--text-secondary);
        }
        
        .label {
            font-weight: 600;
            margin-right: 5px;
            color: var(--text-secondary);
            font-size: 0.8rem;
            text-transform: uppercase;
        }
        
        a {
            color: var(--primary);
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        .empty-state {
            text-align: center;
            padding: 50px;
            color: var(--text-secondary);
            grid-column: 1 / -1;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Plexus Member Directory</h1>
        <p>Load your CSV file to browse and search members</p>
    </header>

    <div class="controls">
        <div class="file-input-wrapper">
            <button class="btn">üìÇ Load CSV File</button>
            <input type="file" id="csvFile" accept=".csv">
        </div>
        <input type="text" id="searchInput" placeholder="Search by name, company, or email..." disabled>
        <div class="stats" id="stats">0 members loaded</div>
    </div>

    <div class="grid" id="membersGrid">
        <div class="empty-state">
            <h3>No data loaded</h3>
            <p>Please upload the 'plexus_members.csv' file to get started.</p>
        </div>
    </div>
</div>

<script>
    const fileInput = document.getElementById('csvFile');
    const searchInput = document.getElementById('searchInput');
    const membersGrid = document.getElementById('membersGrid');
    const statsDiv = document.getElementById('stats');
    
    let allMembers = [];

    fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
            const text = e.target.result;
            parseCSV(text);
        };
        reader.readAsText(file);
    });

    searchInput.addEventListener('input', function(e) {
        const term = e.target.value.toLowerCase();
        const filtered = allMembers.filter(member => {
            return Object.values(member).some(val => 
                String(val).toLowerCase().includes(term)
            );
        });
        renderMembers(filtered);
    });

    function parseCSV(csvText) {
        const lines = csvText.split('\n');
        const headers = parseCSVLine(lines[0]);
        
        allMembers = [];
        
        for (let i = 1; i < lines.length; i++) {
            if (!lines[i].trim()) continue;
            
            const values = parseCSVLine(lines[i]);
            const member = {};
            
            headers.forEach((header, index) => {
                member[header] = values[index] || '';
            });
            
            allMembers.push(member);
        }
        
        statsDiv.textContent = `${allMembers.length} members loaded`;
        searchInput.disabled = false;
        renderMembers(allMembers);
    }
    
    // Handle CSV parsing with quotes
    function parseCSVLine(text) {
        const result = [];
        let cell = '';
        let inQuotes = false;
        
        for (let i = 0; i < text.length; i++) {
            const char = text[i];
            
            if (char === '"') {
                if (inQuotes && text[i+1] === '"') {
                    cell += '"';
                    i++;
                } else {
                    inQuotes = !inQuotes;
                }
            } else if (char === ',' && !inQuotes) {
                result.push(cell);
                cell = '';
            } else {
                cell += char;
            }
        }
        result.push(cell);
        return result;
    }

    function renderMembers(members) {
        membersGrid.innerHTML = '';
        
        if (members.length === 0) {
            membersGrid.innerHTML = '<div class="empty-state"><h3>No matches found</h3></div>';
            return;
        }
        
        members.forEach(member => {
            const card = document.createElement('div');
            card.className = 'card';
            
            const name = member['Company Name'] || 'Unknown Company';
            const email = member['Email'] || '';
            const phone = member['Phone'] || '';
            const website = member['Website'] || '';
            const address = member['Address'] ? `${member['Address']}, ${member['City']}, ${member['State']}` : '';
            const reps = member['Representatives'] || '';
            
            let html = `<h2>${name}</h2>`;
            
            if (reps) html += `<div class="tag">üë§ ${reps}</div>`;
            
            if (email) {
                const emails = email.split(';').map(e => `<a href="mailto:${e.trim()}">${e.trim()}</a>`).join(', ');
                html += `<div class="info-row"><span class="icon">üìß</span> <div>${emails}</div></div>`;
            }
            
            if (phone) {
                 html += `<div class="info-row"><span class="icon">üìû</span> <div>${phone}</div></div>`;
            }
            
            if (website) {
                html += `<div class="info-row"><span class="icon">üåê</span> <div><a href="${website}" target="_blank">Visit Website</a></div></div>`;
            }
            
            if (address) {
                html += `<div class="info-row"><span class="icon">üìç</span> <div>${address}</div></div>`;
            }
            
            card.innerHTML = html;
            membersGrid.appendChild(card);
        });
    }
</script>

</body>
</html>
